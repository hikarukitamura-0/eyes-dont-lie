# **システム要件定義書**

プロジェクト名:Zone Key  
コンセプト: Human Predictive Maintenance（ヒトの予知保全システム）  
ターゲット: エンジニア・クリエイター等の専門職、および健康経営・生産性向上を目指す企業

## **1 プロジェクト概要**

### **1.1 背景と課題**

- **「見えない疲労」と「生産性のムラ」:** 既存ツールでは、脳の疲労度やコンディションの波（バイオリズム）が考慮されず、非効率な状態で重要タスクを行わせるなどのミスマッチが発生している。
- **割り込みによるゾーン崩壊:** エンジニアが深い集中（ゾーン）に入るには時間を要するが、他者からの物理的な割り込みで一瞬にしてリセットされ、大きな損失を生んでいる。
- **監視への拒否感:** カメラによる常時監視は心理的抵抗が強く、導入障壁が高い。

### **1.2 目的（ソリューション）**

- **「ヒトの予知保全」:** ディープラーニングを用いて、PC 操作リズムと環境データから「脳のバッテリー切れ」を予知し、ダウンする前に休憩を促す。
- **物理的な防御（Flow Beacon）:** USB ハードウェアを「信号機」として機能させ、集中状態を可視化することで、周囲からの物理的な干渉（割り込み）をブロックする。
- **AI タスク・ナビゲーション:** コンディション（集中/疲労）に合わせて、その時最も効率よく消化できるタスク（クリエイティブ/ルーチン）を動的に割り当て・推奨する。
- **環境の最適化:** 個人のパフォーマンスが最大化する環境条件（温度・騒音等）を分析し、最適な働く場所を提案する。

## **2\. システム構成図**

\[M5Stack Atom S3 \+ ENV Unit\] \<==USB==\> \[PC (Edge AI Agent)\] \<==HTTPS==\> \[Cloud (Supabase)\] \<==HTTPS==\> \[Web Dashboard\]

## **3\. 機能要件**

### **3.1 ハードウェア (Edge Device)**

名称: Flow Beacon (デバイス名)  
使用機材: M5Stack Atom S3 \+ M5Stack ENV III Unit (温湿度・気圧)

| 機能項目           | 詳細要件                                                                                                                                                                                                                                                                     |
| :----------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **物理キー認証**   | USB 接続時のみ計測・ログ取得を開始する（抜くと停止）。「公私」を切り替える物理スイッチとして機能する。                                                                                                                                                                       |
| **環境センシング** | 気温・湿度・気圧（・騒音 ※マイク追加時）をリアルタイムで取得し、PC へ送信する。                                                                                                                                                                                              |
| **ステータス表示** | ディスプレイに現在の「タンク蓄積量（本日の成果スコア）」や、AI 判定キャラクターを表示する。                                                                                                                                                                                  |
| **シグナル発光**   | AI の判定に基づき、筐体 LED を自動発光させ、周囲へ無言のメッセージを送る。 🔵 **青 (Deep Focus):** 超集中モード。**「話しかけ禁止（Keep Out）」** 🟢 **緑 (Open):** 通常モード。**「相談 OK（Welcome）」** 🔴 **赤 (Overheat):** 疲労/環境悪化。**「要レスキュー（Help）」** |

### **3.2 ソフトウェア (PC Edge Agent)**

**プラットフォーム:** Windows / macOS (Python ベース常駐アプリ)

| 機能項目             | 詳細要件                                                                                                                                                                                                                                                                                                             |
| :------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **PC ログ収集**      | **キーストローク・ダイナミクス取得:** キー入力の内容（文字）は取得せず、「打鍵間隔(ms)のゆらぎ」「ミスタッチ修正頻度」「マウス移動距離」等のメタデータを取得。 **アプリ使用状況:** アクティブウィンドウ名を取得し、作業コンテキスト（開発/チャット/ブラウジング）を判別。                                            |
| **エッジ AI 推論**   | **モデル:** LSTM (Long Short-Term Memory) 等の時系列モデル。 **入力:** PC ログ時系列データ ＋ 環境データ。 **出力:** 現在の集中度スコア、疲労予測（あと何分でダウンするか）。 **特徴:** ユーザーごとの「入力リズムのクセ」を学習し、パーソナライズする。                                                             |
| **AI タスク・ナビ**  | 推論された集中度に基づき、ポップアップで次に行うべきアクションを提案する。 ・**高集中時:** 「ゾーンに入りました。\*\*思考系タスク（コーディング等）\*\*に集中してください。通知をブロックします」 ・**低集中時:** 「脳疲労の兆候があります。\*\*作業系タスク（メール・経費等）\*\*に切り替えるか、休憩してください」 |
| **ハードウェア制御** | 推論結果に基づき、M5Stack の画面描画と LED 色制御信号を送信する。                                                                                                                                                                                                                                                    |

### **3.3 クラウド・Web アプリ (Cloud Platform)**

**プラットフォーム:** Next.js \+ Supabase

| 機能項目                   | 詳細要件                                                                                                                                                             |
| :------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **キャパシティ・タンク**   | 減点法ではなく\*\*「加点法」\*\*を採用。仕事の密度と量に応じてタンクが満たされていく UI。 満タン（100%）になったら「本日の業務終了推奨」とし、罪悪感なく退勤させる。 |
| **環境相性レポート**       | 「あなたは室温 24℃・湿度 50%の時に、最も集中力が持続します」といった分析結果を表示し、フリーアドレスでの座席選びを支援する。                                         |
| **予知保全ダッシュボード** | （管理者向け）チームメンバーの「コンディション推移」をヒートマップ表示。 個人のプライバシーを守りつつ、「来週ダウンしそうなメンバー（要ケア）」をアラート通知する。  |

## **4\. DCON 向け特記事項（差別化戦略）**

### **4.1 技術的優位性 (Technical Edge)**

- **非接触バイタルセンシング:** ウェアラブルデバイスを使わず、キーボードを叩く「リズム（ゆらぎ）」だけで脳の覚醒度・疲労度を推定する独自アルゴリズム。
- **マルチモーダル AI:** 「行動データ（PC ログ）」と「環境データ（室温等）」をクロス分析し、環境要因による生産性低下を特定する。

### **4.2 ビジネス優位性 (Business Value)**

- **スマートウォッチとの差別化:**
  - 「自分を知る」だけでなく、「周囲への信号（青ランプ）」によって**他者の行動を変容させ、割り込みを防ぐ**点。
  - オフィスに物理的に設置することで、**「空気（環境）」の改善提案**までビジネス領域を広げる点。
- **生産性の最大化:**
  - 単なる健康管理に留まらず、「元気な時に何をすべきか」を AI が指示することで、**企業の利益（アウトプット）を直接的に向上させる**。

## **5\. 開発ロードマップ（短期）**

1. **Phase 1: プロトタイプ作成（1 週間）**
   - M5Stack Atom S3 で L チカ（PC から Python で LED 色制御）の実装。
   - Python で「キー打鍵間隔」を取得し、CSV に保存するスクリプトの作成。
2. **Phase 2: データ収集＆AI 学習（2 週間）**
   - チームメンバーがプロトタイプを使用し、ログを収集。
   - 単純な閾値（打鍵数が多い＝青）で信号機を動かし、使用感をテスト。
   - LSTM モデルの構築開始。
3. **Phase 3: Web 連携＆環境センサー統合（1 週間）**
   - Supabase へのデータ送信。
   - ENV ユニットの接続とデータ可視化。
   - ダッシュボード（タンク UI・タスク推奨画面）の実装。
