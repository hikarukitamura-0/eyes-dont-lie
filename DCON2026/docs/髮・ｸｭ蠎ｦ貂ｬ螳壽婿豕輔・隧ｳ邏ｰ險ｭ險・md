# **é›†ä¸­åº¦æ¸¬å®šæ–¹æ³•ã®è©³ç´°è¨­è¨ˆ**

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå: Zone Key - Focus Measurement System  
ãƒãƒ¼ã‚¸ãƒ§ãƒ³: 2.0ï¼ˆPVT æ¡ç”¨ç‰ˆï¼‰  
ä½œæˆæ—¥: 2025-12-11  
æœ€çµ‚æ›´æ–°: 2025-12-11

---

## **1. æ¦‚è¦**

æœ¬è¨­è¨ˆæ›¸ã¯ã€ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¢ãƒ‡ãƒ«ã®å­¦ç¿’ã«å¿…è¦ãªã€Œé›†ä¸­åº¦ã€ã®ãƒ©ãƒ™ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®æ¸¬å®šæ–¹æ³•ã‚’å®šç¾©ã™ã‚‹ã€‚**PVTï¼ˆPsychomotor Vigilance Testï¼šç²¾ç¥é‹å‹•è­¦æˆ’æ¤œæŸ»ï¼‰**ã‚’ä¸»è»¸ã¨ã—ãŸç§‘å­¦çš„æ ¹æ‹ ã®ã‚ã‚‹æ¸¬å®šæ‰‹æ³•ã‚’æ¡ç”¨ã™ã‚‹ã€‚

### **1.1 ãªãœ PVT ãªã®ã‹**

PVT ã¯**NASAã€ç±³è»ã€åŒ»ç™‚æ©Ÿé–¢ã§ä½¿ç”¨ã•ã‚Œã‚‹æ¨™æº–çš„ãªç–²åŠ´ãƒ»è¦šé†’åº¦æ¸¬å®šæ‰‹æ³•**ã§ã‚ã‚Šã€ä»¥ä¸‹ã®ç‰¹å¾´ãŒã‚ã‚‹ï¼š

| ç‰¹å¾´           | èª¬æ˜                                           |
| :------------- | :--------------------------------------------- |
| **ç§‘å­¦çš„æ ¹æ‹ ** | åŒ»å­¦è«–æ–‡ãƒ»ç ”ç©¶ã§å®Ÿè¨¼ã•ã‚ŒãŸä¿¡é ¼æ€§ã®é«˜ã„æ‰‹æ³•     |
| **å®¢è¦³æ€§**     | ä¸»è¦³çš„è©•ä¾¡ã«ä¾å­˜ã›ãšã€ç”Ÿç†å­¦çš„ãªåå¿œé€Ÿåº¦ã‚’æ¸¬å®š |
| **ã‚·ãƒ³ãƒ—ãƒ«**   | å®Ÿè£…ãŒå®¹æ˜“ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®è² æ‹…ãŒå°‘ãªã„         |
| **å³æ™‚æ€§**     | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¦šé†’åº¦ã‚’æ¸¬å®šå¯èƒ½                 |
| **å†ç¾æ€§**     | æ¸¬å®šæ¡ä»¶ãŒçµ±ä¸€ã•ã‚Œã¦ãŠã‚Šã€ãƒ‡ãƒ¼ã‚¿ã®ä¸€è²«æ€§ãŒé«˜ã„ |

### **1.2 DCON ã§ã®è©•ä¾¡ãƒã‚¤ãƒ³ãƒˆ**

PVT ã®æ¡ç”¨ã«ã‚ˆã‚Šã€ä»¥ä¸‹ã®è¦³ç‚¹ã§é«˜è©•ä¾¡ãŒæœŸå¾…ã§ãã‚‹ï¼š

- âœ… **ç§‘å­¦çš„å¦¥å½“æ€§**: åŒ»å­¦çš„ã«å®Ÿè¨¼ã•ã‚ŒãŸæ‰‹æ³•
- âœ… **é©æ–°æ€§**: å¾“æ¥ã®ã‚¢ãƒ—ãƒªã«ãªã„å®¢è¦³çš„æ¸¬å®š
- âœ… **å®Ÿç”¨æ€§**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è² æ‹…ã‚’ã‹ã‘ãªã„è¨­è¨ˆ
- âœ… **ä¿¡é ¼æ€§**: å›½éš›çš„ã«èªã‚ã‚‰ã‚ŒãŸæ¨™æº–æ‰‹æ³•

### **1.3 å‚è€ƒæ–‡çŒ®**

- **Dinges, D. F., & Powell, J. W. (1985).** "Microcomputer analyses of performance on a portable, simple visual RT task during sustained operations." _Behavior Research Methods, Instruments, & Computers._
- **NASA Human Research Program**: PVT ã‚’å®‡å®™é£›è¡Œå£«ã®ç–²åŠ´æ¸¬å®šã«ä½¿ç”¨
- **ç±³å›½é˜²ç·çœ**: å…µå£«ã®è¦šé†’åº¦ç®¡ç†ã«æ¡ç”¨

---

## **2. PVTï¼ˆç²¾ç¥é‹å‹•è­¦æˆ’æ¤œæŸ»ï¼‰ã®è©³ç´°**

### **2.1 PVT ã¨ã¯**

PVT ã¯ã€**è¦–è¦šåˆºæ¿€ã«å¯¾ã™ã‚‹åå¿œæ™‚é–“ï¼ˆReaction Time: RTï¼‰ã‚’æ¸¬å®š**ã™ã‚‹ã“ã¨ã§ã€è¦šé†’åº¦ãƒ»æ³¨æ„åŠ›ãƒ»ç–²åŠ´åº¦ã‚’è©•ä¾¡ã™ã‚‹å¿ƒç†å­¦çš„ãƒ†ã‚¹ãƒˆã§ã™ã€‚

#### **åŸºæœ¬åŸç†**

```
è¦–è¦šåˆºæ¿€ã®æç¤º â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå¿œï¼ˆã‚¯ãƒªãƒƒã‚¯/ã‚­ãƒ¼æŠ¼ä¸‹ï¼‰ â†’ åå¿œæ™‚é–“ã®è¨˜éŒ²
```

- **åˆºæ¿€**: ç”»é¢ã«å›³å½¢ï¼ˆğŸ”´ ãªã©ï¼‰ã‚’è¡¨ç¤º
- **å¿œç­”**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã§ãã‚‹ã ã‘æ—©ãã‚­ãƒ¼ã‚’æŠ¼ã™
- **æ¸¬å®š**: åˆºæ¿€æç¤ºã‹ã‚‰å¿œç­”ã¾ã§ã®æ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰

#### **åˆ¤å®šåŸºæº–**

| åå¿œæ™‚é–“ï¼ˆRTï¼‰    | è¦šé†’åº¦ãƒ¬ãƒ™ãƒ«       | é›†ä¸­åº¦ã‚¹ã‚³ã‚¢ | è§£é‡ˆ                               |
| :---------------- | :----------------- | :----------- | :--------------------------------- |
| **150-250ms**     | éå¸¸ã«é«˜ã„         | 0.9-1.0      | è¶…é›†ä¸­çŠ¶æ…‹ï¼ˆDeep Focusï¼‰           |
| **250-350ms**     | é«˜ã„               | 0.7-0.9      | é›†ä¸­çŠ¶æ…‹ï¼ˆFocusedï¼‰                |
| **350-500ms**     | é€šå¸¸               | 0.5-0.7      | é€šå¸¸ã®ä½œæ¥­çŠ¶æ…‹ï¼ˆOpenï¼‰             |
| **500-700ms**     | ä½ã„               | 0.3-0.5      | æ³¨æ„åŠ›ä½ä¸‹ï¼ˆDistractedï¼‰           |
| **700ms ä»¥ä¸Š**    | éå¸¸ã«ä½ã„         | 0.0-0.3      | ç–²åŠ´ãƒ»é™ç•Œï¼ˆOverheatï¼‰             |
| **åå¿œãªã—(2s+)** | è¦šé†’åº¦ã‚¼ãƒ­ï¼ˆæ¬ æï¼‰ | 0.0          | ãƒã‚¤ã‚¯ãƒ­ã‚¹ãƒªãƒ¼ãƒ—ï¼ˆå±…çœ ã‚Šï¼‰ã®å¯èƒ½æ€§ |

### **2.2 åŒ»å­¦çš„æ ¹æ‹ **

PVT ã¯ä»¥ä¸‹ã®ç”Ÿç†å­¦çš„ç¾è±¡ã‚’æ¸¬å®šã—ã¦ã„ã‚‹ï¼š

1. **æ³¨æ„ã®æŒç¶šæ€§ï¼ˆSustained Attentionï¼‰**

   - é•·æ™‚é–“ä½œæ¥­ã«ã‚ˆã‚‹æ³¨æ„åŠ›ã®ä½ä¸‹ã‚’æ¤œå‡º
   - ç–²åŠ´ãŒè“„ç©ã™ã‚‹ã¨åå¿œæ™‚é–“ãŒé…ããªã‚‹

2. **è¦šé†’åº¦ï¼ˆAlertnessï¼‰**

   - è„³ã®è¦šé†’ãƒ¬ãƒ™ãƒ«ã‚’åæ˜ 
   - ç¡çœ ä¸è¶³ã‚„ç–²åŠ´ã«ã‚ˆã‚Šåå¿œæ™‚é–“ãŒå»¶é•·

3. **èªçŸ¥å‡¦ç†é€Ÿåº¦ï¼ˆProcessing Speedï¼‰**
   - è¦–è¦šæƒ…å ±ã®å‡¦ç†ã‹ã‚‰é‹å‹•å‡ºåŠ›ã¾ã§ã®é€Ÿåº¦
   - ã‚¹ãƒˆãƒ¬ã‚¹ã‚„ç–²åŠ´ã§å‡¦ç†é€Ÿåº¦ãŒä½ä¸‹

### **2.3 å¾“æ¥ã®è‡ªå·±ç”³å‘Šã¨ã®æ¯”è¼ƒ**

| é …ç›®         | è‡ªå·±ç”³å‘Š         | PVT                  |
| :----------- | :--------------- | :------------------- |
| **å®¢è¦³æ€§**   | ä½ã„ï¼ˆä¸»è¦³çš„ï¼‰   | é«˜ã„ï¼ˆç”Ÿç†å­¦çš„æŒ‡æ¨™ï¼‰ |
| **ãƒã‚¤ã‚¢ã‚¹** | ã‚ã‚Š             | ãªã—                 |
| **å†ç¾æ€§**   | ä½ã„             | é«˜ã„                 |
| **è² æ‹…**     | ä¸­ï¼ˆå…¥åŠ›ãŒå¿…è¦ï¼‰ | ä½ï¼ˆ1 å›æ•°ç§’ï¼‰       |
| **ç§‘å­¦æ€§**   | ä½ã„             | é«˜ã„ï¼ˆåŒ»å­¦çš„æ ¹æ‹ ï¼‰   |

---

## **3. å®Ÿè£…è¨­è¨ˆ**

### **3.1 PVT ãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°**

#### **3.1.1 æŠœãæ‰“ã¡ãƒ†ã‚¹ãƒˆæ–¹å¼**

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è‡ªç„¶ãªä½œæ¥­çŠ¶æ…‹ã‚’æ¸¬å®šã™ã‚‹ãŸã‚ã€**äºˆæ¸¬ä¸å¯èƒ½ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°**ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã€‚

```python
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œé–“éš”
TEST_INTERVAL = 5 * 60  # 5åˆ†

# å›ºå®šé–“éš”ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ–½
next_test_time = current_time + TEST_INTERVAL
```

#### **3.1.2 å®Ÿè¡Œé »åº¦**

| æ™‚é–“å¸¯     | é »åº¦     | ç†ç”±                                         |
| :--------- | :------- | :------------------------------------------- |
| **å…¨æ™‚é–“** | 5 åˆ†ã”ã¨ | é›†ä¸­åº¦ã®å¤‰åŒ–ã‚’è©³ç´°ã«è¿½è·¡ã—ã€ãƒ‡ãƒ¼ã‚¿åé›†ã‚’åŠ é€Ÿ |

### **3.2 PVT ãƒ†ã‚¹ãƒˆã®å®Ÿè£…**

#### **3.2.1 åŸºæœ¬å®Ÿè£…ï¼ˆ`pvt_test.py`ï¼‰**

```python
import tkinter as tk
import time
import random
import sqlite3
from datetime import datetime

class PVTTest:
    """PVTï¼ˆç²¾ç¥é‹å‹•è­¦æˆ’æ¤œæŸ»ï¼‰ãƒ†ã‚¹ãƒˆ"""

    def __init__(self, db_path="zone_key_data.db"):
        self.db = sqlite3.connect(db_path)
        self.cursor = self.db.cursor()
        self.create_table()

        self.window = None
        self.stimulus_time = None
        self.reaction_time = None

    def create_table(self):
        """PVTãƒ†ã‚¹ãƒˆçµæœã‚’ä¿å­˜ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ"""
        self.cursor.execute("""
            CREATE TABLE IF NOT EXISTS pvt_results (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                timestamp REAL NOT NULL,
                stimulus_time REAL NOT NULL,
                reaction_time_ms REAL,
                focus_score REAL,
                alertness_level TEXT,
                is_lapse BOOLEAN,
                false_start BOOLEAN
            )
        """)
        self.db.commit()

    def show_test(self):
        """PVTãƒ†ã‚¹ãƒˆã‚’è¡¨ç¤º"""
        # å°ã•ãªã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ä½œæˆï¼ˆ400x300ï¼‰
        self.window = tk.Tk()
        self.window.title("PVT ãƒ†ã‚¹ãƒˆ")

        # ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã¨ä½ç½®ã‚’è¨­å®š
        window_width = 400
        window_height = 300
        screen_width = self.window.winfo_screenwidth()
        screen_height = self.window.winfo_screenheight()
        x = (screen_width - window_width) // 2
        y = (screen_height - window_height) // 2

        self.window.geometry(f"{window_width}x{window_height}+{x}+{y}")
        self.window.configure(bg='black')

        # æœ€å‰é¢ã«è¡¨ç¤ºï¼ˆä½œæ¥­ã®é‚ªé­”ã«ãªã‚‰ãªã„å°ã•ãªã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ï¼‰
        self.window.attributes('-topmost', True)
        self.window.lift()
        self.window.focus_force()

        # ESCã‚­ãƒ¼ã§ä¸­æ–­å¯èƒ½
        self.window.bind('<Escape>', lambda e: self.cancel_test())

        # ãƒ†ã‚¹ãƒˆé–‹å§‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
        instruction = tk.Label(
            self.window,
            text="ğŸ”´ãŒè¡¨ç¤ºã•ã‚ŒãŸã‚‰\nã§ãã‚‹ã ã‘æ—©ã\nã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„",
            font=("Arial", 16),
            fg="white",
            bg="black"
        )
        instruction.pack(expand=True)

        # çŸ­ã„é…å»¶ï¼ˆ0.5-1.5ç§’ï¼‰å¾Œã«åˆºæ¿€ã‚’è¡¨ç¤º
        delay = random.uniform(500, 1500)
        self.window.after(int(delay), lambda: self.show_stimulus(instruction))

        # ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§ã®åå¿œã‚’å¾…ã¤
        self.window.bind('<space>', self.on_response)

        # æ—©æŠ¼ã—ï¼ˆãƒ•ãƒ©ã‚¤ãƒ³ã‚°ï¼‰æ¤œå‡º
        self.stimulus_time = None
        self.false_start = False

        self.window.mainloop()

    def show_stimulus(self, instruction_label):
        """è¦–è¦šåˆºæ¿€ï¼ˆèµ¤ã„å††ï¼‰ã‚’è¡¨ç¤º"""
        instruction_label.destroy()

        # åˆºæ¿€è¡¨ç¤ºæ™‚åˆ»ã‚’è¨˜éŒ²
        self.stimulus_time = time.time()

        # èµ¤ã„å††ã‚’è¡¨ç¤º
        canvas = tk.Canvas(self.window, width=200, height=200,
                          bg='black', highlightthickness=0)
        canvas.pack(expand=True)
        canvas.create_oval(10, 10, 190, 190, fill='red')

        # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆ2ç§’ï¼‰
        self.window.after(2000, self.on_timeout)

    def on_response(self, event):
        """ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åå¿œã‚’è¨˜éŒ²"""
        response_time = time.time()

        # ãƒ•ãƒ©ã‚¤ãƒ³ã‚°ï¼ˆåˆºæ¿€å‰ã«æŠ¼ã—ãŸï¼‰ã®æ¤œå‡º
        if self.stimulus_time is None:
            self.false_start = True
            self.show_result("ãƒ•ãƒ©ã‚¤ãƒ³ã‚°ï¼\nåˆºæ¿€ãŒè¡¨ç¤ºã•ã‚Œã‚‹å‰ã«æŠ¼ã•ã‚Œã¾ã—ãŸã€‚", "orange")
            return

        # åå¿œæ™‚é–“ã®è¨ˆç®—ï¼ˆãƒŸãƒªç§’ï¼‰
        self.reaction_time = (response_time - self.stimulus_time) * 1000

        # çµæœã‚’ä¿å­˜
        self.save_result(self.reaction_time, false_start=False)

        # çµæœã‚’è¡¨ç¤º
        focus_score = self.calculate_focus_score(self.reaction_time)
        alertness_level = self.get_alertness_level(self.reaction_time)

        result_text = f"åå¿œæ™‚é–“: {self.reaction_time:.0f}ms\n\n"
        result_text += f"è¦šé†’åº¦: {alertness_level}\n"
        result_text += f"é›†ä¸­åº¦ã‚¹ã‚³ã‚¢: {focus_score:.2f}"

        color = self.get_result_color(self.reaction_time)
        self.show_result(result_text, color)

    def on_timeout(self):
        """ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼ˆåå¿œãªã—ï¼‰"""
        if self.reaction_time is None:
            self.save_result(None, false_start=False)
            self.show_result("åå¿œãªã—ï¼ˆã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆï¼‰\n\nè¦šé†’åº¦: éå¸¸ã«ä½ã„", "red")

    def calculate_focus_score(self, rt_ms):
        """åå¿œæ™‚é–“ã‹ã‚‰é›†ä¸­åº¦ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®—ï¼ˆ0.0-1.0ï¼‰"""
        if rt_ms is None:
            return 0.0

        if rt_ms < 150:
            # 150msæœªæº€ã¯éç¾å®Ÿçš„ï¼ˆäºˆæ¸¬æŠ¼ã—ï¼‰
            return 0.5
        elif rt_ms < 250:
            # 150-250ms: è¶…é›†ä¸­
            return 0.9 + (250 - rt_ms) / 1000
        elif rt_ms < 350:
            # 250-350ms: é›†ä¸­
            return 0.7 + (350 - rt_ms) / 500
        elif rt_ms < 500:
            # 350-500ms: é€šå¸¸
            return 0.5 + (500 - rt_ms) / 750
        elif rt_ms < 700:
            # 500-700ms: ä½ä¸‹
            return 0.3 + (700 - rt_ms) / 1000
        else:
            # 700msä»¥ä¸Š: éå¸¸ã«ä½ã„
            return max(0.0, 0.3 - (rt_ms - 700) / 2000)

    def get_alertness_level(self, rt_ms):
        """è¦šé†’åº¦ãƒ¬ãƒ™ãƒ«ã®åˆ¤å®š"""
        if rt_ms is None:
            return "éå¸¸ã«ä½ã„ï¼ˆæ¬ æï¼‰"
        elif rt_ms < 250:
            return "éå¸¸ã«é«˜ã„"
        elif rt_ms < 350:
            return "é«˜ã„"
        elif rt_ms < 500:
            return "é€šå¸¸"
        elif rt_ms < 700:
            return "ä½ã„"
        else:
            return "éå¸¸ã«ä½ã„"

    def get_result_color(self, rt_ms):
        """çµæœè¡¨ç¤ºã®è‰²"""
        if rt_ms is None:
            return "red"
        elif rt_ms < 250:
            return "lime"
        elif rt_ms < 350:
            return "lightgreen"
        elif rt_ms < 500:
            return "yellow"
        elif rt_ms < 700:
            return "orange"
        else:
            return "red"

    def save_result(self, rt_ms, false_start):
        """çµæœã‚’ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜"""
        focus_score = self.calculate_focus_score(rt_ms) if rt_ms else 0.0
        alertness_level = self.get_alertness_level(rt_ms)
        is_lapse = (rt_ms is None or rt_ms > 500) if rt_ms else True

        self.cursor.execute("""
            INSERT INTO pvt_results (
                timestamp,
                stimulus_time,
                reaction_time_ms,
                focus_score,
                alertness_level,
                is_lapse,
                false_start
            ) VALUES (?, ?, ?, ?, ?, ?, ?)
        """, (
            time.time(),
            self.stimulus_time or 0,
            rt_ms,
            focus_score,
            alertness_level,
            is_lapse,
            false_start
        ))
        self.db.commit()

        # æœ€æ–°ã®training_dataãƒ¬ã‚³ãƒ¼ãƒ‰ã«focus_scoreã‚’æ›´æ–°
        self.cursor.execute("""
            UPDATE training_data
            SET focus_score = ?,
                state_label = ?
            WHERE id = (SELECT MAX(id) FROM training_data)
        """, (
            focus_score,
            "Deep Focus" if focus_score > 0.7 else
            "Open" if focus_score >= 0.3 else
            "Overheat"
        ))
        self.db.commit()

    def show_result(self, text, color):
        """çµæœã‚’è¡¨ç¤º"""
        # æ—¢å­˜ã®ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’ã‚¯ãƒªã‚¢
        for widget in self.window.winfo_children():
            widget.destroy()

        result_label = tk.Label(
            self.window,
            text=text,
            font=("Arial", 28, "bold"),
            fg=color,
            bg="black"
        )
        result_label.pack(expand=True)

        # 3ç§’å¾Œã«è‡ªå‹•çš„ã«é–‰ã˜ã‚‹
        self.window.after(3000, self.close_test)

    def cancel_test(self):
        """ãƒ†ã‚¹ãƒˆã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«"""
        self.close_test()

    def close_test(self):
        """ãƒ†ã‚¹ãƒˆã‚’é–‰ã˜ã‚‹"""
        if self.window:
            self.window.destroy()
            self.window = None

    def close_db(self):
        """ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚’é–‰ã˜ã‚‹"""
        self.db.close()


# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
if __name__ == "__main__":
    pvt = PVTTest()
    pvt.show_test()
    pvt.close_db()
```

### **3.3 ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¸ã®çµ±åˆ**

ãƒ‡ãƒ¼ã‚¿åé›†ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã« PVT ãƒ†ã‚¹ãƒˆã‚’çµ±åˆã™ã‚‹ã€‚

```python
import time
import random
import threading
from data_aggregator import DataAggregator
from data_storage import DataStorage
from pvt_test import PVTTest

class ZoneKeyDataCollector:
    def __init__(self):
        self.aggregator = DataAggregator()
        self.storage = DataStorage()
        self.pvt = PVTTest()
        self.running = False

        # æ¬¡ã®PVTãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚åˆ»
        self.next_pvt_time = time.time() + random.uniform(30*60, 60*60)

    def collect_loop(self):
        """1åˆ†ã”ã¨ã«ãƒ‡ãƒ¼ã‚¿åé›†"""
        while self.running:
            try:
                # é€šå¸¸ã®ãƒ‡ãƒ¼ã‚¿åé›†
                data = self.aggregator.collect_1min_data()
                self.storage.save_data(data)
                print(f"ãƒ‡ãƒ¼ã‚¿ä¿å­˜å®Œäº†: {time.strftime('%Y-%m-%d %H:%M:%S')}")

                # PVTãƒ†ã‚¹ãƒˆã®å®Ÿè¡Œåˆ¤å®š
                if time.time() >= self.next_pvt_time:
                    self.run_pvt_test()
                    # æ¬¡ã®ãƒ†ã‚¹ãƒˆæ™‚åˆ»ã‚’è¨­å®šï¼ˆ30-60åˆ†å¾Œï¼‰
                    self.next_pvt_time = time.time() + random.uniform(30*60, 60*60)

            except Exception as e:
                print(f"ã‚¨ãƒ©ãƒ¼: {e}")

            time.sleep(60)  # 1åˆ†å¾…æ©Ÿ

    def run_pvt_test(self):
        """PVTãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œ"""
        print("\n" + "="*50)
        print("ğŸ”´ PVTãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™")
        print("="*50)

        # ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã§GUIã‚’å®Ÿè¡Œ
        self.pvt.show_test()

    def start(self):
        """ãƒ‡ãƒ¼ã‚¿åé›†é–‹å§‹"""
        self.running = True
        print("ãƒ‡ãƒ¼ã‚¿åé›†ã‚’é–‹å§‹ã—ã¾ã™...")
        print(f"æ¬¡ã®PVTãƒ†ã‚¹ãƒˆ: {time.strftime('%H:%M:%S', time.localtime(self.next_pvt_time))}")

        # ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¹ãƒ¬ãƒƒãƒ‰ã§å®Ÿè¡Œ
        thread = threading.Thread(target=self.collect_loop, daemon=True)
        thread.start()

        try:
            while True:
                time.sleep(1)
        except KeyboardInterrupt:
            print("\nãƒ‡ãƒ¼ã‚¿åé›†ã‚’åœæ­¢ã—ã¾ã™...")
            self.stop()

    def stop(self):
        """ãƒ‡ãƒ¼ã‚¿åé›†åœæ­¢"""
        self.running = False
        self.storage.close()
        self.pvt.close_db()
        print("ãƒ‡ãƒ¼ã‚¿åé›†ã‚’åœæ­¢ã—ã¾ã—ãŸã€‚")

if __name__ == "__main__":
    collector = ZoneKeyDataCollector()
    collector.start()
```

---

## **4. PVT ãƒ‡ãƒ¼ã‚¿ã®åˆ†æ**

### **4.1 å€‹äººãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã®ç¢ºç«‹**

PVT ã¯**å€‹äººå·®ãŒå¤§ãã„**ãŸã‚ã€å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€Œé€šå¸¸çŠ¶æ…‹ã€ã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’ç¢ºç«‹ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

```python
def calculate_baseline(db_path="zone_key_data.db"):
    """å€‹äººã®ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³åå¿œæ™‚é–“ã‚’è¨ˆç®—"""

    conn = sqlite3.connect(db_path)
    df = pd.read_sql_query("""
        SELECT reaction_time_ms
        FROM pvt_results
        WHERE reaction_time_ms IS NOT NULL
          AND false_start = 0
        ORDER BY timestamp
        LIMIT 20
    """, conn)

    # æœ€åˆã®20å›ã®ãƒ†ã‚¹ãƒˆã‹ã‚‰ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’è¨ˆç®—
    baseline_rt = df['reaction_time_ms'].median()
    baseline_std = df['reaction_time_ms'].std()

    print(f"å€‹äººãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³: {baseline_rt:.0f}ms Â± {baseline_std:.0f}ms")

    return {
        "baseline_median": baseline_rt,
        "baseline_std": baseline_std,
        "baseline_range": (baseline_rt - baseline_std, baseline_rt + baseline_std)
    }
```

### **4.2 ç–²åŠ´æŒ‡æ¨™ã®è¨ˆç®—**

```python
def calculate_fatigue_index(db_path="zone_key_data.db", window_minutes=60):
    """ç–²åŠ´æŒ‡æ¨™ã‚’è¨ˆç®—"""

    conn = sqlite3.connect(db_path)
    current_time = time.time()

    df = pd.read_sql_query("""
        SELECT reaction_time_ms, timestamp
        FROM pvt_results
        WHERE timestamp > ?
          AND reaction_time_ms IS NOT NULL
          AND false_start = 0
        ORDER BY timestamp
    """, conn, params=(current_time - window_minutes * 60,))

    if len(df) == 0:
        return None

    # 1. å¹³å‡åå¿œæ™‚é–“ã®å¢—åŠ 
    recent_mean = df['reaction_time_ms'].mean()

    # 2. ãƒ©ãƒ—ã‚¹ï¼ˆ500msä»¥ä¸Šã®é…ã„åå¿œï¼‰ã®é »åº¦
    lapse_count = (df['reaction_time_ms'] > 500).sum()
    lapse_rate = lapse_count / len(df)

    # 3. åå¿œæ™‚é–“ã®å¤‰å‹•ï¼ˆæ¨™æº–åå·®ï¼‰
    rt_std = df['reaction_time_ms'].std()

    # ç–²åŠ´ã‚¹ã‚³ã‚¢ã®è¨ˆç®—ï¼ˆ0.0-1.0ã€é«˜ã„ã»ã©ç–²åŠ´ï¼‰
    fatigue_score = min(1.0, (
        (recent_mean - 300) / 400 * 0.4 +  # å¹³å‡RT
        lapse_rate * 0.4 +                  # ãƒ©ãƒ—ã‚¹ç‡
        (rt_std / 100) * 0.2                # å¤‰å‹•æ€§
    ))

    return {
        "fatigue_score": fatigue_score,
        "mean_rt": recent_mean,
        "lapse_rate": lapse_rate,
        "rt_variability": rt_std,
        "interpretation": (
            "ç–²åŠ´ãªã—" if fatigue_score < 0.3 else
            "è»½åº¦ã®ç–²åŠ´" if fatigue_score < 0.6 else
            "ä¸­ç¨‹åº¦ã®ç–²åŠ´" if fatigue_score < 0.8 else
            "é‡åº¦ã®ç–²åŠ´"
        )
    }
```

---

## **5. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®æ›´æ–°**

PVT ãƒ†ã‚¹ãƒˆçµæœã‚’ä¿å­˜ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’è¿½åŠ ï¼š

```sql
-- PVTãƒ†ã‚¹ãƒˆçµæœãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE pvt_results (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    timestamp REAL NOT NULL,              -- ãƒ†ã‚¹ãƒˆå®Ÿæ–½æ™‚åˆ»
    stimulus_time REAL NOT NULL,          -- åˆºæ¿€æç¤ºæ™‚åˆ»
    reaction_time_ms REAL,                -- åå¿œæ™‚é–“ï¼ˆãƒŸãƒªç§’ã€NULL=åå¿œãªã—ï¼‰
    focus_score REAL,                     -- é›†ä¸­åº¦ã‚¹ã‚³ã‚¢ï¼ˆ0.0-1.0ï¼‰
    alertness_level TEXT,                 -- è¦šé†’åº¦ãƒ¬ãƒ™ãƒ«
    is_lapse BOOLEAN,                     -- ãƒ©ãƒ—ã‚¹ï¼ˆ500msä»¥ä¸Šï¼‰ã‹ã©ã†ã‹
    false_start BOOLEAN                   -- ãƒ•ãƒ©ã‚¤ãƒ³ã‚°ï¼ˆåˆºæ¿€å‰ã«åå¿œï¼‰
);

-- training_dataãƒ†ãƒ¼ãƒ–ãƒ«ã®æ›´æ–°ï¼ˆfocus_scoreã¯PVTã‹ã‚‰å–å¾—ï¼‰
ALTER TABLE training_data ADD COLUMN pvt_reaction_time REAL;
ALTER TABLE training_data ADD COLUMN pvt_focus_score REAL;
```

---

## **6. å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ç”Ÿæˆ**

PVT ã®çµæœã‚’å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã«çµ±åˆã™ã‚‹ã€‚

```python
def export_training_dataset_with_pvt(db_path="zone_key_data.db",
                                     output_path="dataset_pvt.csv"):
    """PVTãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€å­¦ç¿’ç”¨ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ"""

    conn = sqlite3.connect(db_path)

    # ãƒ¡ã‚¤ãƒ³ã‚¯ã‚¨ãƒªï¼štraining_dataã¨pvt_resultsã‚’çµåˆ
    query = """
        SELECT
            t.timestamp,

            -- ã‚­ãƒ¼ã‚¹ãƒˆãƒ­ãƒ¼ã‚¯ãƒ‡ãƒ¼ã‚¿
            t.typing_speed_kpm,
            t.avg_key_interval_ms,
            t.std_key_interval_ms,
            t.mistype_frequency,

            -- ãƒã‚¦ã‚¹ãƒ‡ãƒ¼ã‚¿
            t.movement_distance_px,
            t.click_frequency,

            -- ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒ‡ãƒ¼ã‚¿
            t.work_category,
            t.window_switch_count,

            -- ç’°å¢ƒãƒ‡ãƒ¼ã‚¿
            t.temperature,
            t.humidity,
            t.pressure,

            -- PVTãƒ‡ãƒ¼ã‚¿ï¼ˆç›´è¿‘ã®ãƒ†ã‚¹ãƒˆçµæœï¼‰
            p.reaction_time_ms AS pvt_rt,
            p.focus_score AS pvt_focus_score,
            p.is_lapse AS pvt_lapse,

            -- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå¤‰æ•°
            p.focus_score AS target_focus_score,
            CASE
                WHEN p.focus_score > 0.7 THEN 'Deep Focus'
                WHEN p.focus_score >= 0.3 THEN 'Open'
                ELSE 'Overheat'
            END AS target_state

        FROM training_data t
        LEFT JOIN (
            SELECT
                *,
                ROW_NUMBER() OVER (
                    PARTITION BY CAST(timestamp / 3600 AS INTEGER)
                    ORDER BY timestamp DESC
                ) as rn
            FROM pvt_results
            WHERE reaction_time_ms IS NOT NULL
        ) p ON p.rn = 1
        WHERE p.reaction_time_ms IS NOT NULL
        ORDER BY t.timestamp
    """

    df = pd.read_sql_query(query, conn)

    # ä½œæ¥­ã‚«ãƒ†ã‚´ãƒªã®One-Hot Encoding
    df = pd.get_dummies(df, columns=['work_category'])

    # æ™‚åˆ»ã®Cyclical Encoding
    df['hour_sin'] = np.sin(2 * np.pi * df['timestamp'].apply(
        lambda x: datetime.fromtimestamp(x).hour) / 24)
    df['hour_cos'] = np.cos(2 * np.pi * df['timestamp'].apply(
        lambda x: datetime.fromtimestamp(x).hour) / 24)

    # CSVå‡ºåŠ›
    df.to_csv(output_path, index=False)
    conn.close()

    print(f"âœ… PVTãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆç”Ÿæˆå®Œäº†: {output_path}")
    print(f"   ç·ã‚µãƒ³ãƒ—ãƒ«æ•°: {len(df)}")
    print(f"   ç‰¹å¾´é‡æ•°: {len(df.columns) - 2}")  # ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå¤‰æ•°ã‚’é™¤ã

    # ãƒ‡ãƒ¼ã‚¿åˆ†å¸ƒã®ç¢ºèª
    print("\nã€é›†ä¸­åº¦ã‚¹ã‚³ã‚¢ã®åˆ†å¸ƒã€‘")
    print(df['target_focus_score'].describe())
    print("\nã€çŠ¶æ…‹ãƒ©ãƒ™ãƒ«ã®åˆ†å¸ƒã€‘")
    print(df['target_state'].value_counts())
```

---

## **7. ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹ã®æœ€é©åŒ–**

### **7.1 ãƒ†ã‚¹ãƒˆé€šçŸ¥ã®è¨­è¨ˆ**

```python
def show_pvt_notification():
    """PVTãƒ†ã‚¹ãƒˆé–‹å§‹å‰ã®é€šçŸ¥ã‚’è¡¨ç¤º"""

    notification = tk.Tk()
    notification.title("Zone Key")
    notification.geometry("400x200")
    notification.attributes('-topmost', True)

    message = tk.Label(
        notification,
        text="ğŸ”´ é›†ä¸­åº¦æ¸¬å®šãƒ†ã‚¹ãƒˆ\n\n"
             "æ•°ç§’å¾Œã«ãƒ†ã‚¹ãƒˆãŒé–‹å§‹ã•ã‚Œã¾ã™ã€‚\n"
             "èµ¤ã„å††ãŒè¡¨ç¤ºã•ã‚ŒãŸã‚‰ã€\n"
             "ã§ãã‚‹ã ã‘æ—©ãã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚",
        font=("Arial", 12),
        pady=20
    )
    message.pack()

    # ã‚«ã‚¦ãƒ³ãƒˆãƒ€ã‚¦ãƒ³
    countdown_label = tk.Label(notification, text="3", font=("Arial", 24, "bold"))
    countdown_label.pack()

    def countdown(n):
        if n > 0:
            countdown_label.config(text=str(n))
            notification.after(1000, lambda: countdown(n-1))
        else:
            notification.destroy()
            # PVTãƒ†ã‚¹ãƒˆé–‹å§‹
            pvt = PVTTest()
            pvt.show_test()

    countdown(3)
    notification.mainloop()
```

### **7.2 ãƒ†ã‚¹ãƒˆçµæœã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ†ã‚¹ãƒˆçµæœã‚’ã‚ã‹ã‚Šã‚„ã™ãä¼ãˆã‚‹ï¼š

```python
def show_detailed_feedback(rt_ms, focus_score):
    """è©³ç´°ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¡¨ç¤º"""

    feedback_window = tk.Tk()
    feedback_window.title("PVTãƒ†ã‚¹ãƒˆçµæœ")
    feedback_window.geometry("500x400")

    # çµæœã‚µãƒãƒªãƒ¼
    title = tk.Label(
        feedback_window,
        text=f"åå¿œæ™‚é–“: {rt_ms:.0f}ms",
        font=("Arial", 20, "bold")
    )
    title.pack(pady=20)

    # ã‚¹ã‚³ã‚¢è¡¨ç¤º
    score_label = tk.Label(
        feedback_window,
        text=f"é›†ä¸­åº¦ã‚¹ã‚³ã‚¢: {focus_score:.2f}/1.0",
        font=("Arial", 16)
    )
    score_label.pack()

    # è©•ä¾¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    if rt_ms < 250:
        message = "ç´ æ™´ã‚‰ã—ã„ï¼éå¸¸ã«é«˜ã„é›†ä¸­åŠ›ã§ã™ã€‚"
        emoji = "ğŸŒŸ"
    elif rt_ms < 350:
        message = "è‰¯å¥½ã§ã™ã€‚é›†ä¸­ã§ãã¦ã„ã¾ã™ã€‚"
        emoji = "âœ…"
    elif rt_ms < 500:
        message = "é€šå¸¸ã®çŠ¶æ…‹ã§ã™ã€‚"
        emoji = "ğŸ‘"
    elif rt_ms < 700:
        message = "å°‘ã—ç–²ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚"
        emoji = "ğŸ˜"
    else:
        message = "ä¼‘æ†©ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚"
        emoji = "ğŸ˜´"

    emoji_label = tk.Label(feedback_window, text=emoji, font=("Arial", 48))
    emoji_label.pack(pady=10)

    message_label = tk.Label(feedback_window, text=message, font=("Arial", 14))
    message_label.pack(pady=10)

    # é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³
    close_btn = tk.Button(
        feedback_window,
        text="é–‰ã˜ã‚‹",
        command=feedback_window.destroy,
        font=("Arial", 12),
        width=15,
        height=2
    )
    close_btn.pack(pady=20)

    feedback_window.mainloop()
```

---

## **8. è©•ä¾¡ã¨ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**

### **8.1 PVT ãƒ‡ãƒ¼ã‚¿ã®å“è³ªãƒã‚§ãƒƒã‚¯**

```python
def validate_pvt_data(db_path="zone_key_data.db"):
    """PVTãƒ‡ãƒ¼ã‚¿ã®å“è³ªã‚’æ¤œè¨¼"""

    conn = sqlite3.connect(db_path)
    df = pd.read_sql_query("""
        SELECT *
        FROM pvt_results
        WHERE reaction_time_ms IS NOT NULL
          AND false_start = 0
    """, conn)

    print("="*50)
    print("PVTãƒ‡ãƒ¼ã‚¿å“è³ªãƒ¬ãƒãƒ¼ãƒˆ")
    print("="*50)

    # 1. ã‚µãƒ³ãƒ—ãƒ«æ•°
    print(f"\nç·ãƒ†ã‚¹ãƒˆå›æ•°: {len(df)}")

    # 2. åå¿œæ™‚é–“ã®åˆ†å¸ƒ
    print(f"\nã€åå¿œæ™‚é–“ã®çµ±è¨ˆã€‘")
    print(f"  å¹³å‡: {df['reaction_time_ms'].mean():.0f}ms")
    print(f"  ä¸­å¤®å€¤: {df['reaction_time_ms'].median():.0f}ms")
    print(f"  æ¨™æº–åå·®: {df['reaction_time_ms'].std():.0f}ms")
    print(f"  ç¯„å›²: {df['reaction_time_ms'].min():.0f} - {df['reaction_time_ms'].max():.0f}ms")

    # 3. ãƒ©ãƒ—ã‚¹ç‡
    lapse_rate = (df['is_lapse'] == 1).sum() / len(df) * 100
    print(f"\nãƒ©ãƒ—ã‚¹ç‡ï¼ˆ500msä»¥ä¸Šï¼‰: {lapse_rate:.1f}%")

    # 4. è¦šé†’åº¦ãƒ¬ãƒ™ãƒ«ã®åˆ†å¸ƒ
    print(f"\nã€è¦šé†’åº¦ãƒ¬ãƒ™ãƒ«ã®åˆ†å¸ƒã€‘")
    print(df['alertness_level'].value_counts())

    # 5. ç•°å¸¸å€¤ã®æ¤œå‡º
    outliers = df[df['reaction_time_ms'] < 150]
    print(f"\nç•°å¸¸ã«é€Ÿã„åå¿œï¼ˆ< 150msï¼‰: {len(outliers)}ä»¶")

    conn.close()
```

### **8.2 ä»–ã®æŒ‡æ¨™ã¨ã®ç›¸é–¢åˆ†æ**

```python
def analyze_pvt_correlation(db_path="zone_key_data.db"):
    """PVTã‚¹ã‚³ã‚¢ã¨ä»–ã®è¡Œå‹•æŒ‡æ¨™ã®ç›¸é–¢ã‚’åˆ†æ"""

    conn = sqlite3.connect(db_path)
    query = """
        SELECT
            p.reaction_time_ms,
            p.focus_score AS pvt_focus_score,
            t.typing_speed_kpm,
            t.mistype_frequency,
            t.window_switch_count,
            t.std_key_interval_ms
        FROM pvt_results p
        JOIN training_data t
          ON ABS(p.timestamp - t.timestamp) < 300
        WHERE p.reaction_time_ms IS NOT NULL
    """

    df = pd.read_sql_query(query, conn)

    # ç›¸é–¢è¡Œåˆ—
    correlation = df.corr()

    print("="*50)
    print("PVTã‚¹ã‚³ã‚¢ã¨è¡Œå‹•æŒ‡æ¨™ã®ç›¸é–¢")
    print("="*50)
    print("\nPVTé›†ä¸­åº¦ã‚¹ã‚³ã‚¢ã¨ã®ç›¸é–¢:")
    print(correlation['pvt_focus_score'].sort_values(ascending=False))

    # æœŸå¾…ã•ã‚Œã‚‹ç›¸é–¢:
    # - pvt_focus_score ã¨ typing_speed_kpm: æ­£ã®ç›¸é–¢
    # - pvt_focus_score ã¨ mistype_frequency: è² ã®ç›¸é–¢
    # - pvt_focus_score ã¨ window_switch_count: è² ã®ç›¸é–¢
    # - pvt_focus_score ã¨ std_key_interval_ms: è² ã®ç›¸é–¢

    conn.close()
```

---

## **9. å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«**

### **Phase 1: PVT åŸºæœ¬å®Ÿè£…ï¼ˆWeek 1ï¼‰**

- [x] PVT ãƒ†ã‚¹ãƒˆã®åŸºæœ¬ UI å®Ÿè£…
- [x] åå¿œæ™‚é–“ã®æ¸¬å®šã¨è¨˜éŒ²
- [x] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã®ä½œæˆ
- [ ] å‹•ä½œç¢ºèªï¼ˆå€‹äººãƒ†ã‚¹ãƒˆï¼‰

### **Phase 2: ãƒ¡ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã¸ã®çµ±åˆï¼ˆWeek 1-2ï¼‰**

- [ ] ãƒ‡ãƒ¼ã‚¿åé›†ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¸ã®çµ±åˆ
- [ ] æŠœãæ‰“ã¡ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ã®å®Ÿè£…
- [ ] é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã®å®Ÿè£…

### **Phase 3: ãƒ‡ãƒ¼ã‚¿åé›†é–‹å§‹ï¼ˆWeek 2-4ï¼‰**

- [ ] 5 åã®ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã«é…å¸ƒ
- [ ] 2 é€±é–“ã®ç¶™ç¶šçš„ãªãƒ‡ãƒ¼ã‚¿åé›†
- [ ] 1 æ—¥ 20-30 å›ã® PVT ãƒ†ã‚¹ãƒˆå®Ÿæ–½
- [ ] ç›®æ¨™: å„äºº 300 å›ä»¥ä¸Šã®ãƒ†ã‚¹ãƒˆï¼ˆè¨ˆ 1500 å›ä»¥ä¸Šï¼‰

### **Phase 4: ãƒ‡ãƒ¼ã‚¿åˆ†æã¨æ¤œè¨¼ï¼ˆWeek 4-5ï¼‰**

- [ ] PVT ãƒ‡ãƒ¼ã‚¿ã®å“è³ªãƒã‚§ãƒƒã‚¯
- [ ] å€‹äººãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã®ç¢ºç«‹
- [ ] ä»–ã®è¡Œå‹•æŒ‡æ¨™ã¨ã®ç›¸é–¢åˆ†æ
- [ ] å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã®ç”Ÿæˆ

---

## **10. DCON ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã§ã®è¨´æ±‚ãƒã‚¤ãƒ³ãƒˆ**

### **10.1 ç§‘å­¦çš„æ ¹æ‹ ã®å¼·èª¿**

```
ã€Œæœ¬ã‚·ã‚¹ãƒ†ãƒ ã§ã¯ã€NASA ã‚„ç±³è»ã§ã‚‚ä½¿ç”¨ã•ã‚Œã‚‹
 PVTï¼ˆç²¾ç¥é‹å‹•è­¦æˆ’æ¤œæŸ»ï¼‰ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

 ã“ã‚Œã¯åŒ»å­¦çš„ã«å®Ÿè¨¼ã•ã‚ŒãŸå®¢è¦³çš„ãªç–²åŠ´æ¸¬å®šæ‰‹æ³•ã§ã‚ã‚Šã€
 ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¸»è¦³ã«ä¾å­˜ã—ãªã„ã€ä¿¡é ¼æ€§ã®é«˜ã„
 é›†ä¸­åº¦æ¸¬å®šã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚ã€
```

### **10.2 ãƒ‡ãƒ¢ãƒ³ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**

å®Ÿéš›ã« PVT ãƒ†ã‚¹ãƒˆã‚’å®Ÿæ¼”ï¼š

1. **é€šå¸¸çŠ¶æ…‹ã§ã®ãƒ†ã‚¹ãƒˆ**: åå¿œæ™‚é–“ 300ms â†’ é›†ä¸­åº¦ã‚¹ã‚³ã‚¢ 0.8
2. **ç–²åŠ´çŠ¶æ…‹ã§ã®ãƒ†ã‚¹ãƒˆ**: åå¿œæ™‚é–“ 650ms â†’ é›†ä¸­åº¦ã‚¹ã‚³ã‚¢ 0.25
3. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯**: å³åº§ã«çŠ¶æ…‹åˆ¤å®š

### **10.3 ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–**

- PVT åå¿œæ™‚é–“ã®çµŒæ™‚å¤‰åŒ–ã‚°ãƒ©ãƒ•
- ç–²åŠ´åº¦ã®æ¨ç§»
- ä»–ã®è¡Œå‹•æŒ‡æ¨™ã¨ã®ç›¸é–¢ãƒãƒƒãƒ—

---

## **11. å‚è€ƒè³‡æ–™**

### **11.1 å­¦è¡“è«–æ–‡**

1. **Dinges, D. F., & Powell, J. W. (1985).** "Microcomputer analyses of performance on a portable, simple visual RT task during sustained operations."
2. **Basner, M., & Dinges, D. F. (2011).** "Maximizing Sensitivity of the Psychomotor Vigilance Test (PVT) to Sleep Loss."
3. **Lim, J., & Dinges, D. F. (2008).** "Sleep deprivation and vigilant attention."

### **11.2 å®Ÿè£…ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹**

- NASA PVT Implementation Guide
- ç±³å›½é˜²ç·çœ PVT ãƒ—ãƒ­ãƒˆã‚³ãƒ«
- Python tkinter å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### **11.3 åŒ»å­¦çš„æ ¹æ‹ **

PVT ã¯ä»¥ä¸‹ã®çŠ¶æ…‹ã®æ¸¬å®šã«ç§‘å­¦çš„ã«æœ‰åŠ¹ã§ã‚ã‚‹ã“ã¨ãŒå®Ÿè¨¼ã•ã‚Œã¦ã„ã‚‹ï¼š

- ç¡çœ ä¸è¶³ã«ã‚ˆã‚‹ç–²åŠ´
- é•·æ™‚é–“ä½œæ¥­ã«ã‚ˆã‚‹æ³¨æ„åŠ›ä½ä¸‹
- èªçŸ¥è² è·ã«ã‚ˆã‚‹å‡¦ç†é€Ÿåº¦ã®ä½ä¸‹
- ãƒã‚¤ã‚¯ãƒ­ã‚¹ãƒªãƒ¼ãƒ—ï¼ˆç¬é–“çš„ãªå±…çœ ã‚Šï¼‰ã®æ¤œå‡º

---

## **12. ã¾ã¨ã‚**

### **PVT æ¡ç”¨ã®å„ªä½æ€§**

| é …ç›®          | å¾“æ¥æ‰‹æ³•ï¼ˆè‡ªå·±ç”³å‘Šï¼‰ | PVT æ‰‹æ³•            |
| :------------ | :------------------- | :------------------ |
| **å®¢è¦³æ€§**    | âŒ ä½ã„              | âœ… é«˜ã„             |
| **ç§‘å­¦æ€§**    | âŒ ä½ã„              | âœ… åŒ»å­¦çš„æ ¹æ‹ ã‚ã‚Š   |
| **å†ç¾æ€§**    | âŒ ä½ã„              | âœ… é«˜ã„             |
| **è² æ‹…**      | âŒ ä¸­ï¼ˆå…¥åŠ›å¿…è¦ï¼‰    | âœ… ä½ï¼ˆæ•°ç§’ã§å®Œäº†ï¼‰ |
| **å³æ™‚æ€§**    | âŒ é…å»¶ã‚ã‚Š          | âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ      |
| **DCON è©•ä¾¡** | â­â­â­               | â­â­â­â­â­          |

### **æœŸå¾…ã•ã‚Œã‚‹æˆæœ**

1. **é«˜ç²¾åº¦ãªé›†ä¸­åº¦æ¨å®š**: åŒ»å­¦çš„ã«æ¤œè¨¼ã•ã‚ŒãŸæ‰‹æ³•ã«ã‚ˆã‚‹ä¿¡é ¼æ€§
2. **DCON ã§ã®é«˜è©•ä¾¡**: ç§‘å­¦çš„æ ¹æ‹ ã«ã‚ˆã‚‹å·®åˆ¥åŒ–
3. **ãƒ¦ãƒ¼ã‚¶ãƒ¼æº€è¶³åº¦**: ã‚·ãƒ³ãƒ—ãƒ«ã§è² æ‹…ã®å°‘ãªã„æ¸¬å®š
4. **ãƒ‡ãƒ¼ã‚¿ã®è³ª**: ä¸€è²«æ€§ã®é«˜ã„å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®æ§‹ç¯‰

**PVT ã®æ¡ç”¨ã«ã‚ˆã‚Šã€Zone Key ã¯ç§‘å­¦çš„ã«è£ä»˜ã‘ã‚‰ã‚ŒãŸã€ä»–ã«ã¯ãªã„é›†ä¸­åº¦ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã¨ãªã‚Šã¾ã™ã€‚**
